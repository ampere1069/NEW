<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在建工程/專案 資產處置流程圖 </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#7B61FF',
                        accent: '#0096FF',
                        light: '#F8FAFC',
                        dark: '#1E293B',
                        darker: '#0F172A',
                        gray: '#94A3B8',
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif', 'bold'],
                    },
                    boxShadow: {
                        'soft': '0 4px 20px rgba(0, 0, 0, 0.08)',
                        'hover': '0 8px 30px rgba(22, 93, 255, 0.15)',
                    }
                },
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
            }
            .gradient-border {
                position: relative;
                border-radius: 1rem;
            }
            .gradient-border::before {
                content: '';
                position: absolute;
                inset: -2px;
                border-radius: 1.125rem;
                background: linear-gradient(45deg, #165DFF, #7B61FF, #165DFF);
                background-size: 200% 200%;
                animation: gradientAnimation 5s ease infinite;
                z-index: -1;
                opacity: 0.7;
            }
            @keyframes gradientAnimation {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
            }
            @keyframes pulseLight {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.9; }
            }
            .pulse-light {
                animation: pulseLight 3s ease-in-out infinite;
            }
        }
    </style>
</head>
<body class="font-inter bg-light text-dark min-h-screen flex flex-col">
    <!-- 頁首 -->
    <header class="bg-white border-b border-gray/20 py-8 px-4 md:px-8">
        <div class="container mx-auto">
            <h1 class="text-[clamp(2rem,5vw,3rem)] font-black text-center text-primary text-shadow">
                在建工程/專案 資產處置流程
            </h1>
            <p class="text-[clamp(1.1rem,2.5vw,1.4rem)] text-center text-dark/70 mt-3 font-medium">
                盤點所有專案資產 | 評估處置方式 | 最適化資源運用
            </p>
        </div>
    </header>

    <!-- 主要內容 -->
    <main class="flex-grow container mx-auto px-4 py-10 md:py-16">
        <!-- Mermaid 流程圖區域 -->
        <div class="relative w-full overflow-hidden rounded-xl gradient-border p-1 md:p-2 mb-16">
            <div class="bg-white rounded-lg p-6 md:p-10 shadow-soft">
                <h2 class="text-[clamp(1.5rem,3vw,1.8rem)] font-bold text-center text-dark mb-8">
                    互動式流程圖
                </h2>
                <!-- Mermaid 容器 -->
                <div class="mermaid-container w-full" style="min-height: 650px;">
                    <pre class="mermaid">
                        graph TD
                            A["<span class='text-xl font-bold'>專案結案：盤點所有專案資產</span>"]:::startNode --> B{"<span class='text-xl font-bold'>依業主需求決定</span>"}:::decisionNode
                            B -- "<span class='text-lg font-semibold'>需要</span>" --> C["<span class='text-xl font-bold'>回歸/移交給業主</span>"]:::processNode
                            B -- "<span class='text-lg font-semibold'>不需要</span>" --> D["<span class='text-xl font-bold'>由工程處ERD進行評估</span>"]:::processNode
                            
                            D --> E{"<span class='text-xl font-bold'>評估資產處置方式</span>"}:::decisionNode
                            E -- "<span class='text-lg font-semibold'>狀態良好，其他專案可用</span>" --> F["<span class='text-xl font-bold'>再利用 / 轉其他專案</span>"]:::processNode
                            E -- "<span class='text-lg font-semibold'>通用性高，可能些許耗損</span>" --> G["<span class='text-xl font-bold'>留存 / 作為後續備品</span>"]:::processNode
                            E -- "<span class='text-lg font-semibold'>已損壞、過時、無再利用價值</span>" --> H["<span class='text-xl font-bold'>報廢</span>"]:::processNode
                            
                            C --> I["<span class='text-xl font-bold'>流程結束</span>"]:::endNode
                            F --> I
                            G --> I
                            H --> I
                            
                            classDef startNode fill:#165DFF,color:white,stroke:#165DFF,stroke-width:2px,rx:12px,ry:12px,padding:15px
                            classDef decisionNode fill:#7B61FF,color:white,stroke:#7B61FF,stroke-width:2px,rx:12px,ry:12px,padding:15px
                            classDef processNode fill:#E0F2FE,color:#1E293B,stroke:#0096FF,stroke-width:2px,rx:12px,ry:12px,padding:15px
                            classDef endNode fill:#00C48C,color:white,stroke:#00C48C,stroke-width:2px,rx:12px,ry:12px,padding:15px
                            linkStyle default stroke:#94A3B8,stroke-width:3px,arrowheadStyle:fill:#165DFF,arrowheadSize:15px
                            linkStyle 0 stroke:#165DFF,stroke-width:3px
                            linkStyle 1 stroke:#7B61FF,stroke-width:3px
                            linkStyle 2 stroke:#7B61FF,stroke-width:3px
                            linkStyle 3 stroke:#165DFF,stroke-width:3px
                            linkStyle 4 stroke:#0096FF,stroke-width:3px
                            linkStyle 5 stroke:#0096FF,stroke-width:3px
                            linkStyle 6 stroke:#0096FF,stroke-width:3px
                            linkStyle 7 stroke:#165DFF,stroke-width:3px
                            linkStyle 8 stroke:#165DFF,stroke-width:3px
                            linkStyle 9 stroke:#165DFF,stroke-width:3px
                            linkStyle 10 stroke:#165DFF,stroke-width:3px
                    </pre>
                </div>
            </div>
        </div>
        
        <!-- 節點詳細資訊卡片 -->
        <div id="detail-card" class="bg-white rounded-xl p-6 md:p-8 border border-primary/20 shadow-soft hidden transform transition-all duration-500 card-hover mb-16">
            <div class="flex justify-between items-start mb-6">
                <h2 id="detail-title" class="text-[clamp(1.5rem,3vw,2rem)] font-black text-primary text-shadow">流程節點詳細資訊</h2>
                <button id="close-detail" class="text-gray hover:text-dark transition-colors">
                    <i class="fa fa-times text-2xl"></i>
                </button>
            </div>
            <div id="detail-content" class="text-[clamp(1.1rem,2vw,1.3rem)] text-dark/90 space-y-4">
                <p class="font-medium">請點擊流程圖中的節點，查看詳細資訊。</p>
            </div>
        </div>
    </main>

    <!-- 頁腳 -->
    <footer class="bg-white border-t border-gray/20 py-8 px-4">
        <div class="container mx-auto text-center text-dark/60">
            <p class="text-xl font-bold">專案資產管理系統</p>
            <p class="mt-3 text-lg">© 2025 新鈳電子股份有限公司 品保部</p>
        </div>
    </footer>

    <!-- JavaScript 設定與互動功能 -->
    <script>
        // 初始化 Mermaid
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: true,
                theme: 'default',
                themeVariables: {
                    fontSize: '16px',
                    lineHeight: '1.8',
                    fontFamily: 'Inter, system-ui, sans-serif',
                },
                flowchart: {
                    curve: 'monotoneX',
                    padding: 20,
                    nodeSpacing: 50,
                    rankSpacing: 80,
                }
            });
            
            // 綁定節點點擊事件 (Mermaid 渲染後)
            setTimeout(bindNodeClicks, 1000);
        });

        // 節點詳細資訊數據
        const nodeDetails = {
            'A': {
                title: '專案結案：盤點所有專案資產',
                content: `
                    <p class="font-semibold">專案完成後，進行全面的資產盤點作業，包括：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2">專案用硬體設備</li>
                        <li class="pl-2">辦公設備</li>
                        <li class="pl-2">其他實體資產</li>
                        <li class="pl-2">確認資產數量、狀態、價值</li>
                    </ul>
                `
            },
            'B': {
                title: '依業主需求決定',
                content: `
                    <p class="font-semibold">根據與業主的合約約定及業主實際需求，決定資產處置方向：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2"><span class="text-secondary font-bold">需要：</span>將相關資產回歸或移交給業主</li>
                        <li class="pl-2"><span class="text-secondary font-bold">不需要：</span>由公司工程處進行進一步評估</li>
                    </ul>
                    <p class="mt-5 text-dark/80">考量因素：合約條款、資產性質、業主需求、未來運用價值</p>
                `
            },
            'C': {
                title: '回歸/移交給業主',
                content: `
                    <p class="font-semibold">按照合約約定及業主要求，辦理資產移交手續：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2">編製詳細的資產移交清單</li>
                        <li class="pl-2">進行資產狀態確認與驗收</li>
                        <li class="pl-2">辦理行政手續變更</li>
                        <li class="pl-2">完成交接確認檔簽署</li>
                    </ul>
                    <p class="mt-5 text-dark/80">確保移交過程合法，雙方權益得到保障。</p>
                `
            },
            'D': {
                title: '由工程處進行評估',
                content: `
                    <p class="font-semibold">工程處對資產進行專業評估，包括：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2">資產目前的實際狀態檢測</li>
                        <li class="pl-2">技術規格與市場適配性評估</li>
                        <li class="pl-2">是否可再利用</li>
                        <li class="pl-2">轉其他專案再利用</li>
                    </ul>
                    <p class="mt-5 text-dark/80">提供客觀專業的評估報告，作為處置依據。</p>
                `
            },
            'E': {
                title: '評估資產處置方式',
                content: `
                    <p class="font-semibold">根據工程處的評估結果，確定最適當的處置方式：</p>
                    <div class="space-y-5 mt-5">
                        <div class="p-4 bg-blue-50 rounded-lg border border-primary/20">
                            <p class="font-bold text-primary">狀態良好，其他專案可用</p>
                            <p class="mt-2 text-dark/80">直接轉移至其他進行中或即將啟動的專案使用</p>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg border border-secondary/20">
                            <p class="font-bold text-secondary">通用性高，可能些許耗損</p>
                            <p class="mt-2 text-dark/80">留存作為公司備品，供日後維護或緊急需求使用</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg border border-gray/20">
                            <p class="font-bold text-gray-700">已損壞、過時、無再利用價值</p>
                            <p class="mt-2 text-dark/80">按照公司規定及環保要求，辦理報廢手續</p>
                        </div>
                    </div>
                `
            },
            'F': {
                title: '再利用 / 轉其他專案',
                content: `
                    <p class="font-semibold">將狀態良好的資產轉移至其他專案繼續使用：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2">更新資產管理系統記錄，變更歸屬專案</li>
                        <li class="pl-2">進行必要的維護保養與升級</li>
                        <li class="pl-2">辦理內部調撥手續</li>
                        <li class="pl-2">提供資產使用說明與技術支援</li>
                    </ul>
                    <p class="mt-5 text-dark/80">最大化資產價值，降低公司採購成本。</p>
                `
            },
            'G': {
                title: '留存 / 作為後續備品',
                content: `
                    <p class="font-semibold">將通用性高的資產留存作為公司備品：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2">建立專門的備品庫存管理系統</li>
                        <li class="pl-2">定期進行保養維護，確保隨時可用</li>
                        <li class="pl-2">優先用於設備維修、緊急替換</li>
                        <li class="pl-2">建立備品調用與歸還流程</li>
                    </ul>
                    <p class="mt-5 text-dark/80">提高服務響應速度，降低停機損失。</p>
                `
            },
            'H': {
                title: '報廢',
                content: `
                    <p class="font-semibold">對無再利用價值的資產進行規範報廢：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2">按照環保法規要求進行環保處置</li>
                        <li class="pl-2">涉密IT資產進行數據清除與物理銷毀</li>
                        <li class="pl-2">辦理資產銷帳與會計處理手續</li>
                        <li class="pl-2">記錄報廢過程與處置結果</li>
                    </ul>
                    <p class="mt-5 text-dark/80">確保報廢過程合法，符合環保要求。</p>
                `
            },
            'I': {
                title: '流程結束',
                content: `
                    <p class="font-semibold">資產處置流程完成，進行收尾工作：</p>
                    <ul class="list-disc list-inside space-y-3 mt-4 text-dark/80">
                        <li class="pl-2">更新資產管理系統，標記處置結果</li>
                        <li class="pl-2">整理相關檔資料，歸檔保存</li>
                        <li class="pl-2">進行處置效果評估與經驗總結</li>
                        <li class="pl-2">提出資產管理改進建議</li>
                    </ul>
                    <p class="mt-5 text-dark/80">流程結束標誌著本次專案資產處置工作圓滿完成。</p>
                `
            }
        };

        // 綁定節點點擊事件
        function bindNodeClicks() {
            // 獲取所有 Mermaid 節點
            const nodes = document.querySelectorAll('.mermaid svg g.node');
            const nodeLabels = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'];
            
            nodes.forEach((node, index) => {
                if (index < nodeLabels.length) {
                    const nodeId = nodeLabels[index];
                    
                    // 添加鼠標樣式
                    node.style.cursor = 'pointer';
                    
                    // 添加懸停效果
                    node.addEventListener('mouseover', function() {
                        this.querySelector('rect')?.classList.add('shadow-hover');
                        this.querySelector('text')?.classList.add('font-black');
                    });
                    
                    node.addEventListener('mouseout', function() {
                        this.querySelector('rect')?.classList.remove('shadow-hover');
                        this.querySelector('text')?.classList.remove('font-black');
                    });
                    
                    // 添加點擊事件
                    node.addEventListener('click', function() {
                        const detailCard = document.getElementById('detail-card');
                        const detailTitle = document.getElementById('detail-title');
                        const detailContent = document.getElementById('detail-content');
                        
                        // 更新詳細資訊
                        detailTitle.textContent = nodeDetails[nodeId].title;
                        detailContent.innerHTML = nodeDetails[nodeId].content;
                        
                        // 顯示詳細資訊卡片
                        detailCard.classList.remove('hidden');
                        detailCard.classList.add('block');
                        
                        // 平滑滾動到詳細資訊區域
                        detailCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        
                        // 節點點擊反饋
                        const rect = this.querySelector('rect');
                        if (rect) {
                            const originalFill = rect.getAttribute('fill');
                            rect.setAttribute('fill', adjustColor(originalFill, 0.8));
                            setTimeout(() => {
                                rect.setAttribute('fill', originalFill);
                            }, 300);
                        }
                    });
                }
            });
        }

        // 調整顏色亮度
        function adjustColor(color, factor) {
            if (color.startsWith('#')) {
                color = color.slice(1);
                const r = parseInt(color.slice(0, 2), 16);
                const g = parseInt(color.slice(2, 4), 16);
                const b = parseInt(color.slice(4, 6), 16);
                return `rgb(${Math.round(r * factor)}, ${Math.round(g * factor)}, ${Math.round(b * factor)})`;
            }
            return color;
        }

        // 關閉詳細資訊卡片
        document.getElementById('close-detail').addEventListener('click', function() {
            const detailCard = document.getElementById('detail-card');
            detailCard.classList.add('hidden');
        });
    </script>
</body>
</html>

